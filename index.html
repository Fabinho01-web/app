<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Inicie sua Imers√£o M√©todo Vida de Valor com um cadastro simples">
    <meta name="keywords" content="cadastro, transforma√ß√£o, vida de valor, gamifica√ß√£o">
    <title>Imers√£o M√©todo Vida de Valor</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Lora', serif;
            background: linear-gradient(135deg, #2F4F4F, #3A6060);
            color: #1A2525;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 30px;
        }
        .container {
            background: #F8F1E9;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
            width: 100%;
            max-width: 500px;
            text-align: center;
            position: relative;
            animation: fadeIn 1s ease-in;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        h1 {
            font-family: 'Cinzel', serif;
            font-size: 2em;
            color: #D4AF37;
            margin-bottom: 20px;
            letter-spacing: 1px;
        }
        .intro {
            background: linear-gradient(180deg, rgba(248,241,233,0.95), rgba(212,175,55,0.05));
            padding: 20px;
            border: 2px solid #D4AF37;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        .intro p {
            color: #1A2525;
            font-size: 1.1em;
            font-style: italic;
            line-height: 1.6;
        }
        .intro .citation {
            font-size: 0.9em;
            color: #2F4F4F;
            margin-top: 10px;
        }
        .admin-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 10px 20px;
            background: #2F4F4F;
            color: #F8F1E9;
            border: none;
            border-radius: 8px;
            font-family: 'Cinzel', serif;
            font-size: 0.95em;
            cursor: pointer;
            transition: background 0.3s, transform 0.3s;
        }
        .admin-btn:hover {
            background: #1A2525;
            transform: scale(1.05);
        }
        .form-group {
            margin-bottom: 20px;
            padding: 15px;
            background: #fff;
            border: 1px solid #2F4F4F;
            border-radius: 8px;
            display: flex;
            align-items: center;
            transition: border-color 0.3s;
        }
        .form-group:focus-within {
            border-color: #D4AF37;
            box-shadow: 0 0 0 3px rgba(212,175,55,0.15);
        }
        .form-group i {
            margin-right: 12px;
            font-size: 1.3em;
            color: #2F4F4F;
        }
        .form-group input {
            border: none;
            font-size: 1em;
            font-family: 'Lora', serif;
            width: 100%;
            outline: none;
            background: transparent;
        }
        .form-group input::placeholder {
            color: #2F4F4F;
            opacity: 0.7;
        }
        .error {
            color: #e53e3e;
            font-size: 0.85em;
            margin-top: 5px;
            text-align: left;
            display: none;
        }
        .btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(90deg, #D4AF37, #B8972A);
            color: #1A2525;
            border: none;
            border-radius: 10px;
            font-family: 'Cinzel', serif;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-top: 20px;
        }
        .btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(212,175,55,0.5);
        }
        .btn i {
            margin-right: 12px;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.75);
            justify-content: center;
            align-items: center;
            z-index: 2;
        }
        .modal-content {
            background: #F8F1E9;
            padding: 30px;
            border-radius: 12px;
            border: 2px solid #D4AF37;
            text-align: center;
            width: 90%;
            max-width: 400px;
            animation: scaleIn 0.5s ease;
        }
        @keyframes scaleIn { from { transform: scale(0.7); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .modal-content h3 {
            font-family: 'Cinzel', serif;
            color: #2F4F4F;
            font-size: 1.2em;
            margin-bottom: 15px;
        }
        .modal-content input {
            width: 80%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #2F4F4F;
            border-radius: 6px;
            font-family: 'Lora', serif;
            font-size: 1em;
        }
        .modal-content button {
            padding: 12px 25px;
            background: #D4AF37;
            color: #1A2525;
            border: none;
            border-radius: 6px;
            font-family: 'Cinzel', serif;
            cursor: pointer;
            transition: background 0.3s;
        }
        .modal-content button:hover {
            background: #B8972A;
        }
        .canvas-confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1002;
        }
        @media (max-width: 480px) {
            .container { padding: 25px; max-width: 100%; }
            h1 { font-size: 1.8em; }
            .form-group { padding: 12px; }
            .btn { font-size: 1.1em; padding: 16px; }
            .modal-content { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="container" role="main">
        <button class="admin-btn" onclick="showLoginModal()" aria-label="Acessar painel de administrador">Painel Adm</button>
        <h1 id="eventName">Imers√£o M√©todo Vida de Valor</h1>
        <div class="intro">
            <p id="bibleVerse">"Porque sou eu que conhe√ßo os planos que tenho para voc√™s, planos de faz√™-los prosperar e n√£o de causar danos, planos de dar a voc√™s esperan√ßa e um futuro."</p>
            <p class="citation" id="bibleCitation">‚Äì Jeremias 29:11</p>
            <p>Sua jornada de transforma√ß√£o come√ßa aqui. Preencha as informa√ß√µes abaixo para iniciar sua imers√£o.</p>
        </div>
        <h2 style="font-family: 'Cinzel', serif; color: #2F4F4F; margin-bottom: 20px;">Cadastro para a Imers√£o</h2>
        <form id="registrationForm" onsubmit="return false;" aria-label="Formul√°rio de cadastro">
            <div class="form-group">
                <i aria-hidden="true">üë§</i>
                <input type="text" id="nameInput" placeholder="Seu nome completo" required aria-label="Nome completo">
                <div class="error" id="nameError">Por favor, insira seu nome completo.</div>
            </div>
            <div class="form-group">
                <i aria-hidden="true">üìû</i>
                <input type="tel" id="phoneInput" placeholder="(XX)XXXXX-XXXX" maxlength="14" required aria-label="N√∫mero de telefone no formato (XX)XXXXX-XXXX">
                <div class="error" id="phoneError">Insira um n√∫mero no formato (XX)XXXXX-XXXX.</div>
            </div>
            <div class="form-group">
                <i aria-hidden="true">‚úâÔ∏è</i>
                <input type="email" id="email" placeholder="seu@email.com" required aria-label="Endere√ßo de e-mail">
                <div class="error" id="emailError">Insira um e-mail v√°lido com @.</div>
            </div>
            <button class="btn" onclick="submitForm()" aria-label="Iniciar Imers√£o">
                <i style="color: #1A2525;" aria-hidden="true">‚úÖ</i> Iniciar Sua Imers√£o
            </button>
        </form>
        <div class="modal" id="loginModal" role="dialog" aria-labelledby="loginTitle">
            <div class="modal-content">
                <h3 id="loginTitle">Login Administrador</h3>
                <input type="password" id="adminPassword" placeholder="Digite a senha" aria-label="Senha de administrador">
                <button onclick="loginAdmin()" aria-label="Entrar no painel de administrador">Entrar</button>
            </div>
        </div>
        <canvas class="canvas-confetti" id="confettiCanvas"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        const form = document.getElementById('registrationForm');
        const emailInput = document.getElementById('email');
        const nameInput = document.getElementById('nameInput');
        const phoneInput = document.getElementById('phoneInput');
        const loginModal = document.getElementById('loginModal');
        let participants = JSON.parse(localStorage.getItem('participants')) || [];

        // Configura√ß√µes iniciais
        const config = JSON.parse(localStorage.getItem('config')) || {
            eventName: "Imers√£o M√©todo Vida de Valor",
            bibleVerse: "Porque sou eu que conhe√ßo os planos que tenho para voc√™s, planos de faz√™-los prosperar e n√£o de causar danos, planos de dar a voc√™s esperan√ßa e um futuro.",
            bibleCitation: "‚Äì Jeremias 29:11",
            introInfo: "Sua jornada de transforma√ß√£o come√ßa aqui. Preencha as informa√ß√µes abaixo para iniciar sua imers√£o."
        };
        document.getElementById('eventName').textContent = config.eventName;
        document.getElementById('bibleVerse').textContent = config.bibleVerse;
        document.getElementById('bibleCitation').textContent = config.bibleCitation;

        // M√°scara para o telefone
        function maskPhone(value) {
            value = value.replace(/\D/g, '');
            if (value.length > 0) {
                value = value.replace(/^(\d{0,2})(\d{0,5})(\d{0,4}).*/, '($1)$2-$3');
                if (value.length < 4 && value.includes('(')) {
                    value = value.replace(/\(|\)/g, '');
                } else if (value.length < 8 && value.includes('-')) {
                    value = value.replace('-', '');
                }
            }
            return value;
        }

        phoneInput.addEventListener('input', (e) => {
            e.target.value = maskPhone(e.target.value);
            validatePhone(e.target.value) ? clearError(phoneInput, 'phoneError') : showError(phoneInput, 'phoneError', 'Insira um n√∫mero no formato (XX)XXXXX-XXXX.');
        });

        // Valida√ß√µes
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validatePhone(phone) {
            const re = /^\(\d{2}\)\d{5}-\d{4}$/;
            return re.test(phone);
        }

        function capitalizeName(name) {
            return name
                .toLowerCase()
                .split(' ')
                .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                .join(' ');
        }

        // Feedback em tempo real
        function showError(input, errorId, message) {
            const error = document.getElementById(errorId);
            error.textContent = message;
            error.style.display = 'block';
            input.parentElement.style.borderColor = '#e53e3e';
        }

        function clearError(input, errorId) {
            const error = document.getElementById(errorId);
            error.style.display = 'none';
            input.parentElement.style.borderColor = '#2F4F4F';
        }

        nameInput.addEventListener('input', () => {
            nameInput.value.trim() ? clearError(nameInput, 'nameError') : showError(nameInput, 'nameError', 'Por favor, insira seu nome completo.');
        });
        emailInput.addEventListener('input', () => {
            validateEmail(emailInput.value) ? clearError(emailInput, 'emailError') : showError(emailInput, 'emailError', 'Insira um e-mail v√°lido.');
        });

        // Confetti para celebra√ß√£o
        function triggerConfetti() {
            const canvas = document.getElementById('confettiCanvas');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            confetti({
                particleCount: 100,
                spread: 60,
                origin: { y: 0.6 },
                colors: ['#D4AF37', '#B8972A', '#2F4F4F']
            });
            setTimeout(() => confetti.reset(), 2000);
        }

        // Envio do formul√°rio
        function submitForm() {
            if (!validateEmail(emailInput.value)) {
                showError(emailInput, 'emailError', 'Insira um e-mail v√°lido com @.');
                return;
            }
            if (!validatePhone(phoneInput.value)) {
                showError(phoneInput, 'phoneError', 'Insira um n√∫mero no formato (XX)XXXXX-XXXX.');
                return;
            }
            if (form.checkValidity()) {
                const formattedName = capitalizeName(nameInput.value);
                const participant = {
                    name: formattedName,
                    phone: phoneInput.value,
                    email: emailInput.value,
                    experience: 'Iniciante',
                    progress: 'N√≠vel 1',
                    timestamp: new Date().toLocaleString('pt-BR', { timeZone: 'America/Sao_Paulo' }),
                    status: 'Ativo'
                };
                participants.push(participant);
                localStorage.setItem('participants', JSON.stringify(participants));
                triggerConfetti();
                window.location.href = 'palestra-nivel1.html';
            }
        }

        // Modais
        function showLoginModal() {
            loginModal.style.display = 'flex';
            document.getElementById('adminPassword').focus();
        }

        function loginAdmin() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'adm') {
                loginModal.style.display = 'none';
                window.location.href = 'admin-panel.html';
            } else {
                alert('Acesso restrito a administradores.');
            }
        }
    </script>
</body>
</html>